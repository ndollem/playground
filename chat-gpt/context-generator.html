
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat GPT Prompt</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4"
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="container my-5">
        <div class="row">
            <div class="col">
                <div class="">
                    <img src="data:image/png;base64,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"
                        style="width:15%; margin: auto;display:block;">
                    <h1 class="pt-2 pb-5" style="text-align:center;">KONTEKS GENERATOR</h1>
                </div>
                <div class="input-group">
                    <input type="text" id="tPrompt" class="form-control"
                        placeholder="Buat pertanyaan untuk membuat list konteks"
                        value="Buatkan 5 kalimat dengan nomor urut tentang tokoh-tokoh penemu terkemuka dunia"
                        aria-label="Ask your question">
                    <button class="btn btn-outline-primary" type="button" id="bSubmit">Generate</button>
                </div>
            </div>
        </div>
        <div class="row mb-3">
            <div class="blockquote-footer fw-light ms-3" style="font-size: .75em;">
                <strong>note : </strong><br />
                Gunakan perintah <strong><em>"xx kalimat"</em></strong> untuk membuat beberapa context yang
                berbeda.<br />
                Tambahkan juga perintah <strong><em>"dengan nomor urut"</em></strong> agar satu context lebih
                mudah dibedakan dengan context berikutnya.
            </div>
        </div>
        <div class="row">
            <div class="col">
                <h2>Hasil konteks</h2>
                <hr>
                
                <div class="accordion" id="accordionResult">

                </div>
                
            </div>
        </div>
    </div>
    <template id="accordionItem">
        <h2 class="accordion-header" id="heading##num##">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                data-bs-target="#collapse##num##" aria-expanded="false" aria-controls="collapse##num##">
                ##text##
            </button>
        </h2>
        <div id="collapse##num##" class="accordion-collapse collapse" aria-labelledby="heading##num##"
            data-bs-parent="#accordionResult">
            <div class="accordion-body">
                Buat artikel berdasarkan konteks diatas
                <button class="btn btn-outline-warning create-article" type="button" data-order="1"
                    data-context="##text##" data-index="##num##">Generate</button>
                <div id="article##num##"></div>
            </div>
        </div>
    </template>


    <!-- Modal -->
    <div class="modal fade" id="staticLoading" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
        aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="staticBackdropLabel">Memproses</h1>
                    <!--button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button-->
                </div>
                <div class="modal-body">
                    <div class="loading">
                        <img src="https://hackernoon.imgix.net/images/0*4Gzjgh9Y7Gu8KEtZ.gif" alt="" class="mx-auto"
                            style="width:35%; display:block; margin-top:-1em;">
                        <p style="text-align:center;margin-top: -35px;">Mohon tunggu</p>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <script>
        (function () {
            const loadModal = new bootstrap.Modal('#staticLoading', {
                keyboard: false
            });
            
            var bSubmit = document.getElementById("bSubmit");
            bSubmit.addEventListener("click", () => {
                chatGPT.getKeyword();
            });

            var chatGPT = {
                apiEndpoin: "https://chatgpt-api-btbd2odrea-et.a.run.app/api/getAnswer",

                getKeyword: function () {

                    //document.getElementsByClassName("loading")[0].classList.toggle("d-none");
                    loadModal.toggle();
                    document.getElementById("accordionResult").innerHTML = "";

                    let prompt = document.getElementById("tPrompt").value;
                    //prompt += ". Tampilkan hasilnya dalam format json.";

                    this.sendPayload(prompt, 1000)
                        .then((response) => {
                            console.log(response.message);
                            if (response.status == '200') {
                                var list = (response.message).split("\n");
                                //var list = JSON.parse(response.message);
                                console.log(list);
                                //console.log(JSON.stringify(list));
                                //this.templateReplace(list);
                                this.templateReplace(list.filter(n => n));
                            } else {
                                console.log(response.message);
                                this.templateReplace([{ 'error': response.message }]);
                            }
                            //document.getElementsByClassName("loading")[0].classList.toggle("d-none");
                            loadModal.toggle()
                        });

                },
                
                sendPayload: async function (prompt, token) {
                    var payload = {
                        question: prompt,
                        max_token: parseFloat(token)
                    };
                    console.log('EXECUTING COMMAND : ', payload);
                    console.log('Processing....')
                    
                    return await fetch(this.apiEndpoin, {
                        method: 'post',
                        cache: 'no-cache',
                        headers: {
                            'Accept': 'application/json',
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify(payload)
                    }).then((response) => {
                        return response.json()
                    }).then((res) => {
                        //console.log(res);
                        if (res.status === 200) {
                            console.log("Answer successfully fetch!")
                            //console.log(res.message);
                            return res;
                        }
                    }).catch((err) => {
                        //console.log(err.message);
                        return {
                            status: 500,
                            message: 'Failed to fetch, possible to high peak request!'
                        };
                    });
                },

                templateReplace: function (items) {
                    //console.log(items);
                    document.getElementById("accordionResult").innerHTML = "";
                    var template = document.getElementById("accordionItem").innerHTML;

                    items.forEach((value, index, array) => {
                        if(value.length > 5){
                            //console.log(index, value);
                            //console.log(template);
                            let item = this.strReplace(template, "##num##", index);
                            //console.log(item);
                            item = this.strReplace(item, "##text##", value);

                            //console.log(item);
                            var newNode = document.createElement("div")
                            newNode.className = 'accordion-item';
                            newNode.innerHTML = item;
                            document.getElementById('accordionResult').appendChild(newNode);
                        }
                    });

                    this.initGenerateArticleBtn();
                },

                strReplace: function (source, text_key, text_val) {
                    return source.replaceAll(text_key, text_val);
                },

                initGenerateArticleBtn: function () {
                    var elements = document.getElementsByClassName("create-article");
                    Array.from(elements).forEach(function (element) {
                        element.addEventListener('click', (el) => {
                            //console.log(el.target.getAttribute("data-context"), el.target.getAttribute("data-index"));
                            chatGPT.generateArticle(el.target.getAttribute("data-context"), el.target.getAttribute("data-index"));
                        });
                    });
                },

                generateArticle: function (context, index) {
                    context = context.replace(/[0-9]\. /g,'');
                    context = context.replace(/[\r\n]/gm, '');
                    var articlePrompt = "Buat artikel dengan minimal 5 paragraf lengkap dengan judul artikel sebagai heading menggunakan konteks topik berikut ini : \"" + context + "\"";
                    console.log(articlePrompt);
                    loadModal.toggle();
                    this.sendPayload(articlePrompt, 3000)
                        .then((response) => {
                            //console.log(response);
                            if (response.status == 200) {
                                document.getElementById("article" + index).innerHTML = '<hr class="my-3" />' + (response.message).split("\n\n").join("<br /><br />");
                            } else {
                                document.getElementById("article" + index).innerHTML = '<hr class="my-3" />ERROR : ' + response.message;
                            }
                            loadModal.toggle()
                        });
                }
            }

            chatGPT.initGenerateArticleBtn();
        })();
    </script>
</body>

</html>
